import { createCache, RedisClient } from '@redwoodjs/api/cache'

import { logger } from './logger'

let client: RedisClient
try {
  client = new RedisClient({ url: 'redis://localhost:6379', logger })
} catch (e) {
  logger.error(`Could not connect to cache: ${e.message}`)
}

export const { cache, cacheFindMany } = createCache(client, {
  logger,
  timeout: 500,
})
